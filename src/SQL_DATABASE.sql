USE master;

IF DB_ID('ferrari') IS NOT NULL
  DROP DATABASE ferrari; 

-- INV (invariant): databasen ferrari findes ikke

CREATE DATABASE ferrari;

GO

USE ferrari;

-- City Table

CREATE TABLE [city] (
	zipCode int PRIMARY KEY,
	city nvarchar(50) NOT NULL,
	CONSTRAINT City_Unique_ZipCode_City UNIQUE (zipCode, city)
);

INSERT INTO city (zipCode, city)
VALUES 
(1000, 'København K'),
(1500, 'København V'),
(1800, 'Frederiksberg C'),
(2000, 'Frederiksberg'),
(2100, 'Copenhagen Ø'),
(2200, 'Copenhagen N'),
(2300, 'Copenhagen S'),
(2400, 'Copenhagen NV'),
(2450, 'Copenhagen SV'),
(2500, 'Valby'),
(2600, 'Glostrup'),
(2605, 'Brøndby'),
(2610, 'Rødovre'),
(2620, 'Albertslund'),
(2625, 'Vallensbæk'),
(2630, 'Taastrup'),
(2635, 'Ishøj'),
(2640, 'Hedehusene'),
(2650, 'Hvidovre'),
(2660, 'Brøndby Strand'),
(2665, 'Vallensbæk Strand'),
(2670, 'Greve Strand'),
(2680, 'Solrød Strand'),
(2690, 'Karlslunde'),
(2700, 'Brønshøj'),
(2720, 'Vanløse'),
(2730, 'Herlev'),
(2740, 'Skovlunde'),
(2750, 'Ballerup'),
(2760, 'Måløv'),
(2765, 'Smørum'),
(2770, 'Kastrup'),
(2791, 'Dragør'),
(2800, 'Kongens Lyngby'),
(2820, 'Gentofte'),
(2830, 'Virum'),
(2840, 'Holte'),
(2850, 'Nærum'),
(2860, 'Søborg'),
(2870, 'Dyssegård'),
(2880, 'Bagsværd'),
(2900, 'Hellerup'),
(2920, 'Charlottenlund'),
(2930, 'Klampenborg'),
(2942, 'Skodsborg'),
(2950, 'Vedbæk'),
(2960, 'Rungsted Kyst'),
(2970, 'Hørsholm'),
(2980, 'Kokkedal'),
(2990, 'Nivå'),
(3000, 'Helsingør'),
(3050, 'Humlebæk'),
(3060, 'Espergærde'),
(3070, 'Snekkersten'),
(3080, 'Tikøb'),
(3100, 'Hornbæk'),
(3120, 'Dronningmølle'),
(3140, 'Ålsgårde'),
(3150, 'Hellebæk'),
(3200, 'Helsinge'),
(3210, 'Vejby'),
(3220, 'Tisvildeleje'),
(3230, 'Græsted'),
(3250, 'Gilleleje'),
(3300, 'Frederiksværk'),
(3310, 'Ølsted'),
(3320, 'Skævinge'),
(3330, 'Gørløse'),
(3360, 'Liseleje'),
(3370, 'Melby, Denmark'),
(3390, 'Hundested'),
(3400, 'Hillerød'),
(3450, 'Lillerød'),
(3460, 'Birkerød'),
(3480, 'Fredensborg'),
(3490, 'Kvistgård'),
(3500, 'Værløse'),
(3520, 'Farum'),
(3540, 'Lynge, Allerod'),
(3550, 'Slangerup'),
(3600, 'Frederikssund'),
(3630, 'Jægerspris'),
(3650, 'Ølstykke'),
(3660, 'Stenløse, Denmark'),
(3670, 'Veksø'),
(4000, 'Roskilde'),
(4030, 'Tune, Denmark'),
(4040, 'Jyllinge'),
(4050, 'Skibby'),
(4060, 'Kirke Såby'),
(4070, 'Kirke Hyllinge'),
(4100, 'Ringsted'),
(4130, 'Viby Sjælland'),
(4140, 'Borup, Køge Municipality'),
(4160, 'Herlufmagle'),
(4171, 'Glumsø'),
(4173, 'Fjenneslev'),
(4174, 'Jystrup'),
(4180, 'Sorø'),
(4190, 'Munke Bjergby'),
(4200, 'Slagelse'),
(4220, 'Korsør'),
(4230, 'Skælskør'),
(4241, 'Vemmelev'),
(4242, 'Boeslunde'),
(4243, 'Rude'),
(4250, 'Fuglebjerg'),
(4261, 'Dalmose'),
(4262, 'Sandved'),
(4270, 'Høng'),
(4281, 'Gørlev'),
(4291, 'Ruds Vedby'),
(4293, 'Dianalund'),
(4295, 'Stenlille'),
(4296, 'Nyrup'),
(4300, 'Holbæk'),
(4320, 'Lejre'),
(4330, 'Hvalsø'),
(4340, 'Tølløse'),
(4350, 'Ugerløse'),
(4360, 'Kirke Eskilstrup'),
(4370, 'Store Merløse'),
(4390, 'Vipperød'),
(4400, 'Kalundborg'),
(4420, 'Regstrup'),
(4440, 'Mørkøv'),
(4450, 'Jyderup'),
(4460, 'Snertinge'),
(4470, 'Svebølle'),
(4480, 'Store Fuglede'),
(4490, 'Jerslev'),
(4500, 'Nykøbing Sjælland'),
(4520, 'Svinninge'),
(4532, 'Gislinge'),
(4534, 'Hørve'),
(4540, 'Fårevejle'),
(4550, 'Asnæs'),
(4560, 'Vig, Denmark'),
(4571, 'Grevinge'),
(4572, 'Nørre Asmindrup'),
(4573, 'Højby'),
(4581, 'Rørvig'),
(4583, 'Sjællands Odde'),
(4591, 'Føllenslev'),
(4592, 'Sejerø'),
(4593, 'Eskebjerg'),
(4600, 'Køge'),
(4621, 'Gadstrup'),
(4622, 'Havdrup'),
(4623, 'Lille Skensved'),
(4632, 'Bjæverskov'),
(4640, 'Faxe'),
(4652, 'Hårlev'),
(4653, 'Karise'),
(4654, 'Faxe Ladeplads'),
(4660, 'Store Heddinge'),
(4671, 'Strøby'),
(4672, 'Klippinge'),
(4673, 'Rødvig Stevns'),
(4681, 'Herfølge'),
(4682, 'Tureby'),
(4683, 'Rønnede'),
(4684, 'Holmegaard'),
(4690, 'Haslev'),
(4700, 'Næstved'),
(4720, 'Præstø'),
(4733, 'Tappernøje'),
(4735, 'Mern'),
(4736, 'Karrebæksminde'),
(4750, 'Lundby, Vordingborg'),
(4760, 'Vordingborg'),
(4771, 'Kalvehave'),
(4772, 'Langebæk'),
(4773, 'Stensved'),
(4780, 'Stege, Denmark'),
(4791, 'Borre, Denmark'),
(4792, 'Askeby'),
(4793, 'Bogø By'),
(4800, 'Nykøbing Falster'),
(4840, 'Nørre Alslev'),
(4850, 'Stubbekøbing'),
(4862, 'Guldborg'),
(4863, 'Eskilstrup'),
(4871, 'Horbelev'),
(4872, 'Idestrup'),
(4873, 'Væggerløse'),
(4874, 'Gedser'),
(4880, 'Nysted'),
(4891, 'Toreby'),
(4892, 'Kettinge'),
(4894, 'Øster Ulslev'),
(4895, 'Errindlev'),
(4900, 'Nakskov'),
(4912, 'Harpelunde'),
(4913, 'Horslunde'),
(4920, 'Søllested'),
(4930, 'Maribo'),
(4941, 'Bandholm'),
(4943, 'Torrig'),
(4944, 'Fejø'),
(4951, 'Nørreballe'),
(4952, 'Stokkemarke'),
(4953, 'Vesterborg'),
(4960, 'Holeby'),
(4970, 'Rødby'),
(4983, 'Dannemare'),
(4990, 'Sakskøbing'),
(3700, 'Rønne'),
(3720, 'Aakirkeby'),
(3730, 'Nexø'),
(3740, 'Svaneke'),
(3751, 'Østermarie'),
(3760, 'Gudhjem'),
(3770, 'Allinge'),
(3782, 'Klemensker'),
(3790, 'Hasle, Bornholm'),
(5000, 'Odense C'),
(5200, 'Odense V'),
(5210, 'Odense NV'),
(5220, 'Odense SØ'),
(5230, 'Odense M'),
(5240, 'Odense NØ'),
(5250, 'Odense SV'),
(5260, 'Odense S'),
(5270, 'Odense N'),
(5290, 'Marslev'),
(5300, 'Kerteminde'),
(5320, 'Agedrup'),
(5330, 'Munkebo'),
(5350, 'Rynkeby'),
(5370, 'Mesinge'),
(5380, 'Dalby'),
(5390, 'Martofte'),
(5400, 'Bogense'),
(5450, 'Otterup'),
(5462, 'Morud'),
(5463, 'Harndrup'),
(5464, 'Brenderup'),
(5466, 'Asperup'),
(5471, 'Søndersø'),
(5474, 'Veflinge'),
(5485, 'Skamby'),
(5491, 'Blommenslyst'),
(5492, 'Vissenbjerg'),
(5500, 'Middelfart'),
(5540, 'Ullerslev'),
(5550, 'Langeskov'),
(5560, 'Aarup'),
(5580, 'Nørre Aaby'),
(5591, 'Gelsted'),
(5600, 'Faaborg'),
(5620, 'Glamsbjerg'),
(5631, 'Ebberup'),
(5642, 'Millinge'),
(5683, 'Haarby'),
(5690, 'Tommerup'),
(5700, 'Svendborg'),
(5750, 'Ringe'),
(5771, 'Stenstrup'),
(5772, 'Kværndrup'),
(5792, 'Årslev'),
(5800, 'Nyborg'),
(5853, 'Ørbæk'),
(5854, 'Gislev'),
(5856, 'Ryslinge'),
(5863, 'Ferritslev'),
(5871, 'Frørup'),
(5874, 'Hesselager'),
(5881, 'Skårup Fyn'),
(5882, 'Vejstrup'),
(5883, 'Oure'),
(5884, 'Gudme'),
(5892, 'Gudbjerg'),
(5900, 'Rudkøbing'),
(5935, 'Bagenkop'),
(5953, 'Tranekær'),
(5960, 'Marstal'),
(5970, 'Ærøskøbing'),
(5985, 'Søby'),
(6000, 'Kolding'),
(6040, 'Egtved'),
(6051, 'Almind'),
(6052, 'Viuf'),
(6064, 'Jordrup'),
(6070, 'Christiansfeld'),
(6091, 'Bjert'),
(6092, 'Sønder Stenderup'),
(6093, 'Sjølund'),
(6094, 'Hejls'),
(6100, 'Haderslev'),
(6200, 'Aabenraa'),
(6230, 'Rødekro'),
(6240, 'Løgumkloster'),
(6261, 'Bredebro'),
(6270, 'Tønder'),
(6280, 'Højer'),
(6300, 'Gråsten'),
(6310, 'Broager'),
(6320, 'Egernsund'),
(6330, 'Padborg'),
(6340, 'Kruså'),
(6360, 'Tinglev'),
(6372, 'Bylderup-Bov'),
(6392, 'Bolderslev'),
(6400, 'Sønderborg'),
(6430, 'Nordborg'),
(6470, 'Sydals'),
(6500, 'Vojens'),
(6510, 'Gram'),
(6520, 'Toftlund'),
(6534, 'Agerskov'),
(6535, 'Branderup'),
(6541, 'Bevtoft'),
(6560, 'Sommersted'),
(6580, 'Vamdrup'),
(6600, 'Vejen'),
(6621, 'Gesten'),
(6622, 'Bække'),
(6623, 'Vorbasse'),
(6630, 'Rødding'),
(6640, 'Lunderskov'),
(6650, 'Brørup'),
(6660, 'Lintrup'),
(6670, 'Holsted'),
(6682, 'Hovborg'),
(6683, 'Føvling'),
(6690, 'Gørding'),
(6700, 'Esbjerg'),
(6705, 'Esbjerg Ø'),
(6710, 'Esbjerg V'),
(6715, 'Esbjerg N'),
(6720, 'Fanø'),
(6740, 'Bramming'),
(6752, 'Glejbjerg'),
(6753, 'Agerbæk'),
(6760, 'Ribe'),
(6771, 'Gredstedbro'),
(6780, 'Skærbæk'),
(6792, 'Rømø'),
(6800, 'Varde'),
(6818, 'Årre'),
(6823, 'Ansager'),
(6830, 'Nørre Nebel'),
(6840, 'Oksbøl'),
(6851, 'Janderup'),
(6852, 'Billum'),
(6854, 'Henne'),
(6855, 'Outrup'),
(6857, 'Blåvand'),
(6862, 'Tistrup'),
(6870, 'Ølgod'),
(6880, 'Tarm'),
(6893, 'Hemmet'),
(6900, 'Skjern'),
(6920, 'Videbæk'),
(6933, 'Kibæk'),
(6940, 'Lem St.'),
(6950, 'Ringkøbing'),
(6960, 'HvideSande'),
(6971, 'Spjald'),
(6973, 'Ørnhøj'),
(6980, 'Tim'),
(6990, 'Ulfborg'),
(7000, 'Fredericia'),
(7080, 'Børkop'),
(7100, 'Vejle'),
(7120, 'Vejle Øst'),
(7130, 'Juelsminde'),
(7140, 'Stouby'),
(7150, 'Barrit'),
(7160, 'Tørring'),
(7171, 'Uldum'),
(7173, 'Vonge'),
(7182, 'Bredsten'),
(7183, 'Randbøl'),
(7184, 'Vandel'),
(7190, 'Billund'),
(7200, 'Grindsted'),
(7250, 'Hejnsvig'),
(7260, 'Sønder Omme'),
(7270, 'Stakroge'),
(7280, 'SønderFelding'),
(7300, 'Jelling'),
(7321, 'Gadbjerg'),
(7323, 'Give'),
(7330, 'Brande'),
(7361, 'Ejstrupholm'),
(7362, 'Hampen'),
(7400, 'Herning'),
(7430, 'Ikast'),
(7441, 'Bording'),
(7442, 'Engesvang'),
(7451, 'Sunds'),
(7470, 'Karup'),
(7480, 'Vildbjerg'),
(7490, 'Aulum'),
(7500, 'Holstebro'),
(7540, 'Haderup'),
(7550, 'Sørvad'),
(7560, 'Hjerm'),
(7570, 'Vemb'),
(7600, 'Struer'),
(7620, 'Lemvig'),
(7650, 'Bøvlingbjerg'),
(7660, 'Bækmarksbro'),
(7673, 'Harboøre'),
(7680, 'Thyborøn'),
(7700, 'Thisted'),
(7730, 'Hanstholm'),
(7741, 'Frøstrup'),
(7742, 'Vesløs'),
(7752, 'Snedsted'),
(7755, 'Bedsted Thy'),
(7760, 'Hurup Thy'),
(7770, 'Vestervig'),
(7790, 'Thyholm'),
(7800, 'Skive'),
(7830, 'Vinderup'),
(7840, 'Højslev'),
(7850, 'Stoholm'),
(7860, 'Spøttrup'),
(7870, 'Roslev'),
(7884, 'Fur'),
(7900, 'Nykøbing Mors'),
(7950, 'Erslev'),
(7960, 'Karby'),
(7970, 'Redsted Mors'),
(7980, 'Vils'),
(7990, 'Øster Assels'),
(8000, 'Århus C'),
(8200, 'Århus N'),
(8210, 'Århus V'),
(8220, 'Brabrand'),
(8230, 'Åbyhøj'),
(8240, 'Risskov'),
(8250, 'Egå'),
(8260, 'Viby'),
(8270, 'Højbjerg'),
(8300, 'Odder'),
(8305, 'Samsø'),
(8310, 'Tranbjerg'),
(8320, 'Mårslet'),
(8330, 'Beder'),
(8340, 'Malling'),
(8350, 'Hundslund'),
(8355, 'Solbjerg'),
(8361, 'Hasselager'),
(8362, 'Hørning'),
(8370, 'Hadsten'),
(8380, 'Trige'),
(8381, 'Tilst'),
(8382, 'Hinnerup'),
(8400, 'Ebeltoft'),
(8410, 'Rønde'),
(8420, 'Knebel'),
(8444, 'Balle'),
(8450, 'Hammel'),
(8462, 'Harlev'),
(8464, 'Galten'),
(8471, 'Sabro'),
(8472, 'Sporup'),
(8500, 'Grenaa'),
(8520, 'Lystrup'),
(8530, 'Hjortshøj'),
(8541, 'Skødstrup'),
(8543, 'Hornslet'),
(8544, 'Mørke'),
(8550, 'Ryomgård'),
(8560, 'Kolind'),
(8570, 'Trustrup'),
(8581, 'Nimtofte'),
(8585, 'Glesborg'),
(8586, 'Ørum Djurs'),
(8592, 'Anholt'),
(8600, 'Silkeborg'),
(8620, 'Kjellerup'),
(8632, 'Lemming'),
(8641, 'Sorring'),
(8643, 'Ans By'),
(8653, 'Them'),
(8654, 'Bryrup'),
(8660, 'Skanderborg'),
(8670, 'Låsby'),
(8680, 'Ry'),
(8700, 'Horsens'),
(8721, 'Daugård'),
(8722, 'Hedensted'),
(8723, 'Løsning'),
(8732, 'Hovedgård'),
(8740, 'Brædstrup'),
(8751, 'Gedved'),
(8752, 'Østbirk'),
(8762, 'Flemming'),
(8763, 'Rask Mølle'),
(8765, 'Klovborg'),
(8766, 'Nørre Snede'),
(8781, 'Stenderup'),
(8783, 'Hornsyld'),
(8800, 'Viborg'),
(8830, 'Tjele'),
(8831, 'Løgstrup'),
(8832, 'Skals'),
(8840, 'Rødkærsbro'),
(8850, 'Bjerringbro'),
(8860, 'Ulstrup'),
(8870, 'Langå'),
(8881, 'Thorsø'),
(8882, 'Fårvang'),
(8883, 'Gjern'),
(8900, 'Randers C'),
(8920, 'Randers NV'),
(8930, 'Randers NØ'),
(8940, 'Randers SV'),
(8960, 'Randers SØ'),
(8950, 'Ørsted'),
(8961, 'Allingåbro'),
(8963, 'Auning'),
(8970, 'Havndal'),
(8981, 'Spentrup'),
(8983, 'Gjerlev'),
(8990, 'Fårup'),
(9000, 'Aalborg'),
(9200, 'Aalborg SV'),
(9210, 'Aalborg SØ'),
(9220, 'Aalborg Øst'),
(9230, 'Svenstrup'),
(9240, 'Nibe'),
(9260, 'Gistrup'),
(9270, 'Klarup'),
(9280, 'Storvorde'),
(9293, 'Kongerslev'),
(9300, 'Sæby'),
(9310, 'Vodskov'),
(9320, 'Hjallerup'),
(9330, 'Dronninglund'),
(9340, 'Asaa'),
(9352, 'Dybvad'),
(9362, 'Gandrup'),
(9370, 'Hals'),
(9380, 'Vestbjerg'),
(9381, 'Sulsted'),
(9382, 'Tylstrup'),
(9400, 'Nørresundby'),
(9430, 'Vadum'),
(9440, 'Aabybro'),
(9460, 'Brovst'),
(9480, 'Løkken-Vrå'),
(9490, 'Pandrup'),
(9492, 'Blokhus'),
(9493, 'Saltum'),
(9500, 'Hobro'),
(9520, 'Skørping'),
(9530, 'Støvring'),
(9541, 'Suldrup'),
(9550, 'Mariager'),
(9560, 'Hadsund'),
(9574, 'Bælum'),
(9575, 'Terndrup'),
(9600, 'Aars'),
(9610, 'Nørager'),
(9620, 'Aalestrup'),
(9631, 'Gedsted'),
(9632, 'Møldrup'),
(9640, 'Farsø'),
(9670, 'Løgstør'),
(9681, 'Ranum'),
(9690, 'Fjerritslev'),
(9700, 'Brønderslev'),
(9740, 'Jerslev Jylland'),
(9750, 'Østervrå'),
(9760, 'Vrå'),
(9800, 'Hjørring'),
(9830, 'Tårs'),
(9850, 'Hirtshals'),
(9870, 'Sindal'),
(9881, 'Bindslev'),
(9900, 'Frederikshavn'),
(9940, 'Læsø'),
(9970, 'Strandby'),
(9981, 'Jerup'),
(9982, 'Ålbæk'),
(9990, 'Skagen');

-- Employee Table

CREATE TABLE [employee] (
  id int PRIMARY KEY IDENTITY(1000,1),
  firstName nvarchar(50) NOT NULL,
  lastName nvarchar(50) NOT NULL,
  email nvarchar(100) NOT NULL UNIQUE,
  phone nvarchar(20) NOT NULL,
  [address] nvarchar(255) NOT NULL,
  zipCode int NOT NULL,
  hireDate datetime NOT NULL,
  department nvarchar(50) NOT NULL CHECK (department IN ('administration', 'sales', 'finance', 'service', 'marketing', 'parts', 'IT')),
  [role] nvarchar(50) NOT NULL CHECK ([role] IN ('manager', 'seller'))
);

INSERT INTO [employee] ([firstName], [lastName], [email], [phone], [address], [zipCode], [hireDate], [department], [role])
VALUES 
	('Majed Hussein', 'Farhan', 'majed@gmail.com', '12345678', 'Sønderparken 17 1. th', 7430, '2023-01-01', 'IT', 'manager'),
    ('Rasmus Lysgaard', 'V', 'rasmv@example.com', '1234567890', 'Solparken 1', 6900, '2023-01-01', 'administration', 'manager'),
    ('Rasmus Kortsen', 'K', 'rasmk@example.com', '9876543210', 'Nørregade 9B, 1. 3', 7400, '2023-02-01', 'sales', 'manager'),
    ('Shahana Thirukumar', 'T', 'shahana@example.com', '5551234567', 'Tietgensgade 4, 1. 11', 7400, '2023-03-01', 'sales', 'manager'),
    ('Sarah', 'Williams', 'sarahwilliams@example.com', '1112223333', '321 Pine St', 9000, '2023-04-01', 'service', 'seller'),
    ('Emily', 'Brown', 'emilybrown@example.com', '9998887777', '654 Cedar St', 6700, '2023-05-01', 'marketing', 'seller'),
    ('Daniel', 'Taylor', 'danieltaylor@example.com', '4445556666', '987 Maple St', 8900, '2023-06-01', 'parts', 'seller'),
    ('Olivia', 'Anderson', 'oliviaanderson@example.com', '7778889999', '789 Oak St', 6000, '2023-07-01', 'IT', 'seller'),
    ('James', 'Martinez', 'jamesmartinez@example.com', '2223334444', '123 Elm St', 8700, '2023-08-01', 'administration', 'seller'),
    ('Sophia', 'Garcia', 'sophiagarcia@example.com', '6667778888', '456 Oak St', 7100, '2023-09-01', 'sales', 'seller'),
    ('Benjamin', 'Brown', 'benjaminbrown@example.com', '3334445555', '789 Maple St', 4000, '2023-10-01', 'finance', 'seller');


-- SellerApprovalLimit

CREATE TABLE [sellerApprovalLimit]
(
	[id] int PRIMARY KEY IDENTITY(1000,1),
	[employeeID] int FOREIGN KEY REFERENCES employee(id) ON DELETE CASCADE ON UPDATE CASCADE,
	[maxApprovalLimit] int NOT NULL
);

INSERT INTO [sellerApprovalLimit] ([employeeID], [maxApprovalLimit]) VALUES
(1000, 500000),
(1001, 200000),
(1002, 250000),
(1003, 175000),
(1004, 300000),
(1005, 225000),
(1006, 100000),
(1007, 150000),
(1008, 175000),
(1009, 350000),
(1010, 400000);

-- User Table

CREATE TABLE [user] (
  id INT PRIMARY KEY IDENTITY(1000,1),
  userName nvarchar(50) NOT NULL UNIQUE,
  [password] nvarchar(100) NOT NULL,
  employeeId int NOT NULL FOREIGN KEY REFERENCES employee(id) ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO [user] ([userName], [password], [employeeId]) VALUES 
('majed', 'jXE0n+zjmq+634jKdquyEh4QwhjSZwGVDd1cIksVdHc=MZ2fhgzsUS7mjfaUnVwyPQ==', 1000),
('rasmv', 'jXE0n+zjmq+634jKdquyEh4QwhjSZwGVDd1cIksVdHc=MZ2fhgzsUS7mjfaUnVwyPQ==', 1001),
('rasmk', 'jXE0n+zjmq+634jKdquyEh4QwhjSZwGVDd1cIksVdHc=MZ2fhgzsUS7mjfaUnVwyPQ==', 1002),
('shahana', 'jXE0n+zjmq+634jKdquyEh4QwhjSZwGVDd1cIksVdHc=MZ2fhgzsUS7mjfaUnVwyPQ==', 1003),
('user4', 'jXE0n+zjmq+634jKdquyEh4QwhjSZwGVDd1cIksVdHc=MZ2fhgzsUS7mjfaUnVwyPQ==', 1004),
('user5', 'jXE0n+zjmq+634jKdquyEh4QwhjSZwGVDd1cIksVdHc=MZ2fhgzsUS7mjfaUnVwyPQ==', 1005),
('user6', 'jXE0n+zjmq+634jKdquyEh4QwhjSZwGVDd1cIksVdHc=MZ2fhgzsUS7mjfaUnVwyPQ==', 1006),
('user7', 'jXE0n+zjmq+634jKdquyEh4QwhjSZwGVDd1cIksVdHc=MZ2fhgzsUS7mjfaUnVwyPQ==', 1007),
('user8', 'jXE0n+zjmq+634jKdquyEh4QwhjSZwGVDd1cIksVdHc=MZ2fhgzsUS7mjfaUnVwyPQ==', 1008),
('user9', 'jXE0n+zjmq+634jKdquyEh4QwhjSZwGVDd1cIksVdHc=MZ2fhgzsUS7mjfaUnVwyPQ==', 1009),
('user10', 'jXE0n+zjmq+634jKdquyEh4QwhjSZwGVDd1cIksVdHc=MZ2fhgzsUS7mjfaUnVwyPQ==', 1010);

-- Log Table

CREATE TABLE [log] (
  id INT PRIMARY KEY IDENTITY(1,1),
  logType nvarchar(50) NOT NULL,
  [logMessage] text NOT NULL,
  userID INT DEFAULT 0,
  createdAt datetime NOT NULL DEFAULT GETDATE()
);

INSERT INTO [log] (logType, logMessage) VALUES
('information', 'Logged in the system'),
('error', 'Error'),
('warning', 'failed login attempt to the system'),
('debugging', 'RuntimeException...............');

-- Customer Table

CREATE TABLE [customer] (
  id INT PRIMARY KEY IDENTITY(1000,1),
  firstName nvarchar(50) NOT NULL,
  lastName nvarchar(50) NOT NULL,
  email nvarchar(100) NOT NULL UNIQUE,
  phone nvarchar(20) NOT NULL,
  [address] nvarchar(255) NOT NULL,
  CPRHash nvarchar(100) NOT NULL,
  zipCode int NOT NULL FOREIGN KEY REFERENCES city(zipCode) ON DELETE NO ACTION ON UPDATE CASCADE
);

INSERT INTO [customer] (firstName, lastName, email, phone, [address], CPRHash, zipCode)
VALUES
    ('Mads', 'Jensen', 'mads.jensen@example.com', '12345678', 'Søndergade 1', 'WXOo+IED8m5JU+EFMbzwZ/KENylV+gsUnaDdiDKEGn0=x3Xnt1ft5jDNCqERO9ECZhqziCnKUqZCKreChi8mhkY=', 1000),
    ('Lise', 'Nielsen', 'lise.nielsen@example.com', '87654321', 'Hovedvej 2', 'deU6QWtawzCm4hRLoMa4D9yQ6OKr8i1vnd8fRzS2xMo=UjqhjsuJLFH72+KMV+EKkkGeCnPokx5Xi5i6/8z5nN0=', 8000),
    ('Søren', 'Hansen', 'soren.hansen@example.com', '76543210', 'Gadekær 3', 'B7VuxQEF3YbE9W7hMpoSBZoXnOdcp4kcDfU+sETrn5Y=IXHaFjPoglxOrkIAO5xcA3KQCwQPgaL2KLTrmaN7lTM=', 5000),
    ('Line', 'Pedersen', 'line.pedersen@example.com', '34567890', 'Skovvej 4', 'jBpQXipAf9C5Q4kVlRAM4nnNB5Oq4Yr6dHgUJMlbSYE=nKLEqoGkCsAupVcuC2xgPxmMclpSMk7xSzeWPgcHWfc=', 9000),
    ('Henrik', 'Møller', 'henrik.moller@example.com', '09874321', 'Østergade 5', 'nK1W2mNYzu0MD5gu79prcEPvuI1MAPcOud44aoouFhc=pDn5rIWZj7cNkIP03NKetLzHNhS3oaxREMy4zhqCXPw=', 6700),
    ('Camilla', 'Rasmussen', 'camilla.rasmussen@example.com', '98743210', 'Nørregade 6', 'BhKaqdq5LSc/AYH+qqCYBlZX5+GGtZqPRQ7EhgNqOPo=UcQP9GVaodkYDJeW20Tk0dkaLRfQnOyYHfj4ltAea6Q=', 6000),
    ('Martin', 'Christensen', 'martin.christensen@example.com', '14567890', 'Vestergade 7', 'DpvSUMoEWA06NEeQMANzAVZmBcrXJQlYw85OgKIH2C4=hdgHUbn8WckzVuDwXmtJ/Z+PFGPv2VuYyzSPeDAyPvA=', 8700),
    ('Maria', 'Andersen', 'maria.andersen@example.com', '09876541', 'Kirkestræde 8', '9ZIfjg1CaUMoVFS9KA2H1csiE2163yvDI9MJujEdOv8=bh8YpDDJbLxf9bph5AS2Zn/k4vRDFTOaok6NIImM+9s=', 7100),
    ('Thomas', 'Larsen', 'thomas.larsen@example.com', '98765430', 'Torvet 9', '20j/285pwKXlSBBX9vxt96HZVrxED1cEpykFHYJdLPU=BrizMgVeg5wMRbi9KzfOu3kjCUkfWLdjd8oPy1kgBak=', 4000),
    ('Louise', 'Mortensen', 'louise.mortensen@example.com', '14567890', 'Gågade 10', 'DRUzFB7JhbFTUV3LBu5FJSaJ/siRk8/MOMTnnqTcWZA=lSNPAntdpaCZKL3l/EMqih5SVVnKsIuDDovf90qduTo=', 7400);


-- Car Table
CREATE TABLE car (
  id INT PRIMARY KEY IDENTITY(1000,1),
  model nvarchar(100) NOT NULL,
  [year] int NOT NULL,
  color nvarchar(50) NOT NULL,
  [mileage] int NOT NULL,
  transmission nvarchar(20) NOT NULL CHECK ([transmission] IN ('manual', 'automatic')),
  fuelType nvarchar(50) NOT NULL CHECK (fuelType IN ('benzin', 'diesel', 'biodiesel', 'hybrid', 'el')),
  engineSize decimal(4,2) NOT NULL,
  kmPerLiter int,
  horsePower int NOT NULL,
  seats int NOT NULL,
  doors int NOT NULL,
  VIN nvarchar(20) NOT NULL UNIQUE,
  sold tinyint NOT NULL DEFAULT 0 CHECK(sold IN(0, 1)),
  price decimal(10,2) NOT NULL,
  [description] text
);

INSERT INTO car (model, [year], color, [mileage], transmission, fuelType, engineSize, kmPerLiter, horsePower, seats, doors, VIN, sold, price, [description])
VALUES 
('488 GTB', 2022, 'Red', 0, 'Automatic', 'benzin', 3.9, 12, 660, 2, 2, 'TWPRKIGQZAJU4IYX7', 0, 700000.00, 'New Ferrari 488 GTB for sale.'),
('488 GTB', 2019, 'Red', 5000, 'automatic', 'benzin', 3.9, 13, 661, 2, 2, 'PCCFTGHN0CRMVDN7K', 0, 800000.00, 'Beautiful car in excellent condition.'),
('812 Superfast', 2022, 'Red', 5000, 'automatic', 'benzin', 6.5, 14, 789, 2, 2, 'I4KRYDILIQJK0M2BJ', 0, 900000.00, 'Brand new car'),
('SF90 Stradale', 2021, 'Yellow', 8000, 'automatic', 'hybrid', 4.0, 10, 986, 2, 2, 'ZMOJWSMPW4UVEWCB3', 0, 700000.00, 'Like-new car'),
('Roma', 2021, 'White', 3000, 'automatic', 'benzin', 3.9, 20, 612, 2, 2, 'Y28MP11T37SI1ISMR', 0, 650000.00, 'Used car in excellent condition'),
('Portofino', 2020, 'Black', 12000, 'automatic', 'benzin', 3.9, 15, 592, 2, 2, 'XRIAPZDSMCPGQWZXK', 0, 700000, 'Pre-owned car with low mileage'),
('488 Pista', 2019, 'Blue', 15000, 'manual', 'benzin', 3.9, 16, 711, 2, 2, 'V3ZJ8RBXOOTLAO9VX', 0, 850000, 'Rare supercar'),
('LaFerrari', 2016, 'Red', 20000, 'automatic', 'hybrid', 6.3, 17, 950, 2, 2, 'FVFO8RRHF6IP5ZCAS', 0, 9000000, 'Limited edition hypercar'),

('F8 Tributo', 2020, 'Red', 5000, 'automatic', 'benzin', 3.9, 12, 710, 2, 2, 'FXFR0QDSZBL4THZNC', 0, 950000.00, 'Powerful sports car'),
('812 Superfast', 2021, 'Yellow', 3000, 'automatic', 'benzin', 6.5, 8, 800, 2, 2, 'NR6EUDZIJZ8TBC4BQ', 0, 850000.00, 'Exhilarating performance'),
('SF90 Stradale', 2022, 'Black', 1000, 'automatic', 'hybrid', 4.0, 20, 1000, 2, 2, 'C7NABZLO9R2E2OKVE', 0, 750000.00, 'Cutting-edge hybrid technology'),
('Portofino', 2019, 'White', 8000, 'automatic', 'benzin', 3.9, 10, 600, 2, 2, '27UDAKJG6HGHPPBVX', 0, 600000.00, 'Elegant and versatile'),
('Roma', 2021, 'Blue', 4000, 'automatic', 'benzin', 3.9, 11, 620, 2, 2, '43JOFJOQHBAICNAMV', 0, 780000.00, 'Sophisticated grand tourer'),
('488 GTB', 2018, 'Red', 12000, 'automatic', 'benzin', 3.9, 9, 670, 2, 2, 'OBB2BHJPZXSD7O1OU', 0, 920000.00, 'Iconic mid-engine supercar'),
('488 Spider', 2020, 'Yellow', 6000, 'automatic', 'benzin', 3.9, 9, 670, 2, 2, '93IUJOB6U17IPJCM4', 0, 640000.00, 'Open-top driving experience'),
('458 Italia', 2016, 'Red', 15000, 'automatic', 'benzin', 4.5, 7, 570, 2, 2, 'YCTETPZQGE6BVOQIN', 0, 880000.00, 'Legendary V8 engine'),
('California T', 2017, 'Black', 10000, 'automatic', 'benzin', 3.9, 10, 560, 2, 2, '6U4HFXN5MEXSLPT1M', 0, 690000.00, 'Stylish and versatile convertible'),
('LaFerrari', 2015, 'Red', 2000, 'automatic', 'hybrid', 6.3, 12, 963, 2, 2, '6DBTEOPPYPHI3ZRXN', 0, 1500000.00, 'Limited edition hybrid hypercar');;


-- CarImage Table

Create TABLE [carImage](
	[id] int PRIMARY KEY IDENTITY(1,1),
	[carID] int NOT NULL FOREIGN KEY REFERENCES car(id) ON DELETE CASCADE ON UPDATE CASCADE,
	[image] nvarchar(255) NOT NULL
);

INSERT INTO [carImage] ([carId], [image]) VALUES
(1000, 'ferrari-488-gtb.jpeg'),
(1000, 'ferrari-488-gtb-2.jpeg'),
(1002, 'ferrari-812-Superfast-1.jpeg'),
(1002, 'ferrari-812-Superfast-2.jpeg'),
(1004, 'ferrari-roma-1.jpeg'),
(1004, 'ferrari-roma-2.jpeg');


-- LoanApplication Table

CREATE TABLE [loanApplication]
(
	id int PRIMARY KEY IDENTITY(1000, 1),
	[customerID] int FOREIGN KEY REFERENCES customer(id) ON DELETE CASCADE ON UPDATE CASCADE,
	[sellerID] int FOREIGN KEY REFERENCES employee(id) ON DELETE SET NULL ON UPDATE CASCADE,
	[carID] int FOREIGN KEY REFERENCES car(id) ON DELETE SET NULL ON UPDATE CASCADE,
	[applicationDate] datetime DEFAULT GETDATE(),
	[loanAmount] int NOT NULL,
	[payment] int NOT NULL,
	[months] int NOT NULL,
	[interestRate] float NOT NULL,
	[monthlyPayment] decimal(10,2),
	[status] nvarchar(100) NOT NULL CHECK ([status] IN ('processing','approved', 'rejected')),
	[note] text
);

INSERT INTO [loanApplication] (customerID, sellerID, carID, applicationDate, loanAmount, payment, [months], interestRate, monthlyPayment, [status], [note]) VALUES 
(1000, 1000, 1000, '2023-01-11', 500000, 200000, 120, 5.5, 7000, 'processing', 'notes asdasdasdasd'),
(1001, 1001, 1001, '2023-02-04', 650000, 150000, 120, 5.9, 8000, 'processing', 'notes aljlioejkds'),
(1002, 1002, 1002, '2023-02-07', 750000, 150000, 120, 5.8, 8000, 'processing', 'notes aljlioejkds'),
(1003, 1003, 1003, '2023-03-08', 550000, 150000, 120, 5.6, 8000, 'processing', 'notes aljlioejkds'),
(1004, 1000, 1004, '2023-03-15', 450000, 150000, 120, 6.1, 8000, 'processing', 'notes aljlioejkds'),
(1005, 1001, 1005, '2023-04-20', 550000, 150000, 120, 6.2, 8000, 'processing', 'notes aljlioejkds'),
(1006, 1002, 1006, '2023-04-30', 700000, 150000, 120, 6.3, 8000, 'processing', 'notes aljlioejkds'),
(1007, 1003, 1007, '2023-05-05', 750000, 150000, 120, 6.4, 8000, 'processing', 'notes aljlioejkds'),
(1008, 1004, 1008, '2023-05-15', 800000, 150000, 120, 7.0, 8000, 'processing', 'notes aljlioejkds'),
(1009, 1005, 1009, '2023-05-24', 700000, 150000, 120, 7.1, 8000, 'processing', 'notes aljlioejkds');

-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
-- CRUD SECTION
-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


-- Get all cars that have no loan application

SELECT * FROM [car]
WHERE [id] NOT IN (SELECT [carID] FROM [loanApplication] WHERE [status] = 'processing' or [status] = 'approved');

-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++